<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=275052925858908";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<%= javascript_include_tag "//www.google.com/jsapi" %> 
<%= javascript_include_tag "application", "chartkick" %>

<% pie_lib_vals = {fontName: "Georgia", colors:["#00ccff","#00A3CC","#80E6FF","#005266","#A8A8A8","#3C3C3C"]} %>

<% col_lib_vals = {fontName: "Georgia", colors:["#00CCFF"]} %>

<% total_friends = @result.demo_hash["total_friend_count"] %>

<% if @result.demo_hash["Age"] %>
  <% num_age_friends = @result.demo_hash["Age"]["ans_p_friend"].keys.length %>
<% else %>
  <% num_age_friends = 0 %>
<% end %>

<div class="results">
  <h2>DEMOGRAPHICS FOR: <span class="bluetext" style="font-family:georgia"><%= @result.searched_handle -%></span></h2> 
  <ul>
    <li><strong>DATE RETRIEVED:</strong><span style="font-family:georgia"> <%= @result.created_at.strftime('%b %d, %Y') -%></span></li>
    <li><strong>NUMBER OF FOLLOWERS INCLUDED:</strong> <span style="font-family:georgia"><%= num_age_friends %> of <%= total_friends %>
      <% if num_age_friends > 0 %>
        , or <%= num_age_friends/total_friends.to_f*100 %>%
      <% end %>
      </span></li>
  </ul>

  <div class="fb-share-button" data-href="http://twitter-diversity-project.herokuapp.com/results/<%= @result.id %>" data-layout="button">
  </div>
  <a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-hashtags="twitterdiversityproject">Tweet</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<br>
<br>
  <div class="methodology">
    <p><a href="#" id="methodology"><em><img class="arrowsmall" src="/assets/arrow1.png">How do you calculate results?</em></a></p>
    <div id="methodologyinfobox" style="display: none">
      <p><strong><span style="font-family:oswald, sans-serif">BLAH</span></strong><br>
        Blah Blah blah. Lorem ipsum foxtrot charlie.
      </p>
      <p><strong><span style="font-family:oswald, sans-serif">SUPER BLAH</span></strong><br>
        All the blah blah blahies. This text is here to take up space. Blahdey blah blah blah blahhhh.
      </p>
      <p><strong><span style="font-family:oswald, sans-serif">BOOP.</span></strong><br>
        Beep boop boop boop beep bop. Booop beep bop bop booooooop. Beeeeeep. Beep beep bop.
      </p>
    </div>
  </div>
</div>

<hr></hr>

<% if @result.demo_hash["Education"] #!= {} %>
	<%= pie_chart @result.edu_chart, {library: {title:
		"Education"}.merge(pie_lib_vals)} %>
<% end %>

<% if @result.demo_hash["Income"] #.income_chart != {} %>
	<%= column_chart @result.income_chart, {library: {title:
		"Income"}.merge(col_lib_vals)} %>
<% end %>

<% if @result.demo_hash["Age"] #age_chart != {} %>
	<%= column_chart @result.age_chart, {library: {title:
		"Age"}.merge(col_lib_vals)} %>
<% end %>

<% if @result.demo_hash["Ethnicity"] #ethnicity_chart #!= {} %>
	<%= pie_chart @result.ethnicity_chart, {library: {title:
		"Ethnicity"}.merge(pie_lib_vals)} %>
<% end %>

<% if @result.demo_hash["Gender"] #gender_chart #!= {} %>
	<%= pie_chart @result.gender_chart, {library: {title:
		"Gender"}.merge(pie_lib_vals)} %>
<% end %>

<% if @result.demo_hash["Orientation"] #orientation_chart #!= {} %>
	<%= pie_chart @result.orientation_chart, {library: {title:
		"Orientation"}.merge(pie_lib_vals)} %>
<% end %>