<div class="form">
  <p class="error">
    <% if flash[:errors] %>
    ERROR
    <ul class="error">
      <% flash[:errors].each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
    <% end %>
  </p>

    <h2>Add or update your information: <span class="bluetext" font-family="georgia"><%= session[:screen_name] -%></span></h2>
  <br><br>

  <%= form_for @user do |f| -%>
     <%= f.fields_for :user_answers, @single_answers do |u| %>
       <%= u.label :value, user_answer_field_label(u.object.field_value).upcase %>
       <%= u.hidden_field :answer_type %>

       <% if u.object.answer_type == "Education" %>
         <%= u.text_field :value, style: "font-family:georgia;width: 70%", autofocus: true %><br>
         <label><em>OR CHOOSE AN OPTION FROM BELOW </em></label><br>
         <input type="radio" name="education1" value="elementary"> <span style="font-family:georgia"> Elementary</span><br>
         <input type="radio" name="education1" value="secondary"> <span style="font-family:georgia"> Secondary</span><br>
         <input type="radio" name="education1" value="post-secondary"> <span style="font-family:georgia"> Post-secondary</span><br>
         <input type="radio" name="education1" value="graduate"> <span style="font-family:georgia"> Graduate</span><br>
         <input type="radio" name="education1" value="post-graduate"> <span style="font-family:georgia"> Post-graduate</span><br><br>

       <% else %>
        <%= u.number_field :value, style: "font-family:georgia;width: 70%" %><br>

       <% end %>
     <% end %>

     <label>ETHNICITY/IES:</label>
     <%= f.text_area :ethnicities_text_area, style: "font-family:georgia; width: 70%", :cols => 10, :rows => 5 %><br>
     <label><em>OR CHOOSE AN OPTION FROM BELOW </em></label><br>
     <!-- automatically calculate the 5 most common responses and show those as check boxes while still leaving a free form text field for people to enter their own answers -->
     <% User.top_five_ethnicities.each do |v| %>
       <p style="font-family:georgia; width:70%">
            <% if @user.ethnicities[0].value.include?(v) %>
              <%= check_box_tag :ethnicities, v, :checked %>
            <% else %>
              <%= check_box_tag :ethnicities, v %>
            <% end %>
         <%=  f.label v %>
       </p>
     <% end %>

     <label>GENDER/S:</label>
     <%= f.text_area :genders_text_area, style: "font-family:georgia; width: 70%", :cols => 10, :rows => 5 %><br>
     <label><em>OR CHOOSE AN OPTION FROM BELOW </em></label><br>
     <!-- automatically calculate the 5 most common responses and show those as check boxes while still leaving a free form text field for people to enter their own answers -->
     <% Gender.top_five.each do |v| %>
       <p style="font-family:georgia; width:70%">
           <% if @user.genders[0].value.include?(v.fetch(0).value) %>
             <%= check_box_tag :genders, v.fetch(0).value, :checked %>
           <% else %>
             <%= check_box_tag :genders, v.fetch(0).value %>
           <% end %>
         <%=  f.label v.fetch(0).value %>
       </p>
     <% end %>

     <label>ORIENTATION/S:</label>
     <%= f.text_area :orientations_text_area, style: "font-family:georgia; width: 70%", :cols => 10, :rows => 5 %><br>
     <label><em>OR CHOOSE AN OPTION FROM BELOW </em></label><br>
     <!-- automatically calculate the 5 most common responses and show those as check boxes while still leaving a free form text field for people to enter their own answers -->
     <% Orientation.top_five.each do |v| %>
       <p style="font-family:georgia; width:70%">
           <% if @user.orientations[0].value.include?(v.fetch(0).value) %>
             <%= check_box_tag :orientations, v.fetch(0).value, :checked %>
           <% else %>
             <%= check_box_tag :orientations, v.fetch(0).value %>
           <% end %>
         <%=  f.label v.fetch(0).value %>
       </p>
     <% end %>

     <%= f.submit "UPDATE USER", class: "button" %>


   <% end %>

</div>
